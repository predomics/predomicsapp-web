# PredomicsApp — Production Environment Variables
# Copy this file to .env and fill in the values before starting.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your production values
#   docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

# --------------------------------------------------------------------------
# Security (REQUIRED — change these!)
# --------------------------------------------------------------------------

# Generate with: openssl rand -hex 32
PREDOMICS_SECRET_KEY=CHANGE-ME-generate-with-openssl-rand-hex-32

# PostgreSQL password (used by both db and app services)
POSTGRES_PASSWORD=CHANGE-ME-use-a-strong-password

# --------------------------------------------------------------------------
# Domain & SSL
# --------------------------------------------------------------------------

# Your production domain (used by NGINX and CORS)
DOMAIN=predomics.example.com

# Email for Let's Encrypt certificate notifications
CERTBOT_EMAIL=admin@example.com

# --------------------------------------------------------------------------
# Database
# --------------------------------------------------------------------------

# Async connection URL (uses POSTGRES_PASSWORD above)
# For external PostgreSQL, change the host/port accordingly.
PREDOMICS_DATABASE_URL=postgresql+asyncpg://predomics:${POSTGRES_PASSWORD}@db:5432/predomics

# --------------------------------------------------------------------------
# Application
# --------------------------------------------------------------------------

# CORS origins (comma-separated or JSON array)
PREDOMICS_CORS_ORIGINS=["https://${DOMAIN}"]

# Data directories (defaults work with Docker volumes)
PREDOMICS_DATA_DIR=/app/data
PREDOMICS_UPLOAD_DIR=/app/data/uploads
PREDOMICS_PROJECT_DIR=/app/data/projects
PREDOMICS_SAMPLE_DIR=/app/data/qin2014_cirrhosis

# JWT token expiry in minutes (default: 1440 = 24 hours)
# PREDOMICS_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Default computation settings
# PREDOMICS_DEFAULT_THREAD_NUMBER=4
# PREDOMICS_DEFAULT_POPULATION_SIZE=5000
# PREDOMICS_DEFAULT_MAX_EPOCHS=100

# --------------------------------------------------------------------------
# Optional: Email (SMTP)
# --------------------------------------------------------------------------

# PREDOMICS_SMTP_HOST=smtp.example.com
# PREDOMICS_SMTP_PORT=587
# PREDOMICS_SMTP_USER=noreply@example.com
# PREDOMICS_SMTP_PASSWORD=smtp-password
# PREDOMICS_SMTP_FROM=noreply@example.com

# --------------------------------------------------------------------------
# Optional: Distributed computing (scitq)
# --------------------------------------------------------------------------

# PREDOMICS_SCITQ_SERVER=https://scitq.example.com
# PREDOMICS_SCITQ_TOKEN=your-scitq-token
# PREDOMICS_SCITQ_CONTAINER=ghcr.io/predomics/predomicsapp-web:latest

# --------------------------------------------------------------------------
# Backup settings
# --------------------------------------------------------------------------

# Number of daily backups to retain
BACKUP_RETENTION_DAYS=7
